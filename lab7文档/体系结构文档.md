# 第三阶段 软件体系结构描述文档

[toc]

## 文档修改历史

| 修改人员 | 日期      | 修改原因                   | 版本号 |
| :------: | --------- | -------------------------- | ------ |
|   郑杰   | 2022.6.29 | 增加前后端接口规范部分内容 | 1.0    |
|  秦予唯  | 2022.6.30 | 更新开发包图，信息视角     | 1.1    |
|  徐瀚林  | 2022.7.2  | 更新部分接口视角与信息视角 | 1.2    |
|  徐王子  | 2022.7.3  | 增加目录、统一格式         | 1.2.1  |
|   郑杰   | 2022.7.5  | 更新接口视角               | 1.3    |
|  秦予唯  | 2022.7.8  | 更新前后端接口规范部分内容 | 1.4    |
|   郑杰   | 2022.7.9  | 完成所有规范内容，最终整合 | 1.5    |

## 1 引言

### 1.1 编制目的

本报告详细完成对C在线ERP网站的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 1.2 词汇表

| 词汇名称 | 词汇含义                                                     | 备注 |
| :------: | ------------------------------------------------------------ | ---- |
|   ERP    | Enterprise Resource Planning的简称，是一个系统化的企业管理系统 |      |

### 1.3 参考资料

[1] 骆斌,丁二玉,刘钦.软件工程与计算.卷二, 软件开发的技术基础[M].北京:机械工业出版社,2013.

## 2 产品概述

参考ERP进销存管理系统用例文档和ERP进销存管理系统需求规格说明中对产品的概括描述

## 3 逻辑视图

ERP进销存管理系统中，选择了分层体系结构风格，将系统分为3层（展示层、业务逻辑层、数据层），能够很好地示意整个高层抽象。展示层包括前端网站界面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如下图所示

![包图表达逻辑视角](https://se-image.oss-cn-shanghai.aliyuncs.com/img/%E5%8C%85%E5%9B%BE%E8%A1%A8%E8%BE%BE%E9%80%BB%E8%BE%91%E8%A7%86%E8%A7%92.png)

![逻辑视角 _2_.png](https://s2.loli.net/2022/07/09/hupR2YHiMA5jLaK.png)

## 4 组合视角

### 4.1 开发包图

表示软件组件在开发时环境中的静态组织

ERP网站的最终开发包设计如下表所示：

| 开发（物理）包             | 依赖的其他开发包                                    |
| -------------------------- | --------------------------------------------------- |
| public                     |                                                     |
| src                        | assets,components,layouts,plugins,router,util,views |
| api                        | http_rest_api                                       |
| assets                     |                                                     |
| components                 |                                                     |
| layouts                    |                                                     |
| plugins                    |                                                     |
| router                     |                                                     |
| util                       |                                                     |
| views                      | api                                                 |
| admin                      | api                                                 |
| Home                       | api                                                 |
| Login                      | api                                                 |
| Register                   | api                                                 |
| sql                        |                                                     |
| config                     |                                                     |
| enums                      |                                                     |
| exception                  | enums                                               |
| po                         | enums                                               |
| vo                         | enums                                               |
| AccountController          |                                                     |
| BusinessHistoryController  |                                                     |
| CategoryController         |                                                     |
| ClockInController          |                                                     |
| CustomerController         |                                                     |
| EmployeeController         |                                                     |
| PayController              |                                                     |
| ProductController          |                                                     |
| PurchaseController         |                                                     |
| PurchaseReturnsController  |                                                     |
| ReceiptController          |                                                     |
| SalaryController           |                                                     |
| SaleDetailController       |                                                     |
| SaleStatusController       |                                                     |
| InitialAccountController   |                                                     |
| YearEndBonusController     |                                                     |
| UserController             |                                                     |
| WarehouseExcelController   |                                                     |
| WarehouseController        |                                                     |
| AccountService             | http_rest_api,po                                    |
| BusinessHistoryService     | http_rest_api,po                                    |
| CategoryService            | http_rest_api,po                                    |
| ClockInService             | http_rest_api,po                                    |
| CustomerService            | http_rest_api,po                                    |
| EmployeeService            | http_rest_api,po                                    |
| PaySheetService            | http_rest_api,po                                    |
| ProductService             | http_rest_api,po                                    |
| PurchaseService            | http_rest_api,po                                    |
| PurchaseReturnsService     | http_rest_api,po                                    |
| ReceiptSheetService        | http_rest_api,po                                    |
| SalaryService              | http_rest_api,po                                    |
| SaleDetailService          | http_rest_api,po                                    |
| SaleService                | http_rest_api,po                                    |
| SaleStatusService          | http_rest_api,po                                    |
| InitialAccountService      | http_rest_api,po                                    |
| YearEndBonusService        | http_rest_api,po                                    |
| UserService                | http_rest_api,po                                    |
| WarehouseExcelService      | http_rest_api,po                                    |
| WarehouseService           | http_rest_api,po                                    |
| AccountServiceImpl         | AccountService                                      |
| BusinessHistoryServiceImpl | BusinessHistoryService                              |
| CategoryServiceImpl        | CategoryService                                     |
| ClockInServiceImpl         | ClockInService                                      |
| CustomerServiceImpl        | CustomerService                                     |
| EmployeeServiceImpl        | EmployeeService                                     |
| PaySheetServiceImpl        | PaySheetService                                     |
| ProductServiceImpl         | ProductService                                      |
| PurchaseServiceImpl        | PurchaseService                                     |
| PurchaseReturnsServiceImpl | PurchaseReturnsService                              |
| ReceiptSheetServiceImpl    | ReceiptSheetService                                 |
| SalaryServiceImpl          | SalaryService                                       |
| SaleStatusServiceImpl      | SaleStatusService                                   |
| InitialAccountServiceImpl  | InitialAccountService                               |
| YearEndBonusServiceImpl    | YearEndBonusService                                 |
| SaleDetailServiceImpl      | SaleDetailService                                   |
| SaleServiceImpl            | SaleService                                         |
| UserServiceImpl            | UserService                                         |
| WarehouseExcelServiceImpl  | WarehouseExcelService                               |
| WarehouseServiceImpl       | WarehouseService                                    |
| util                       | enums,exception,vo                                  |
| resources                  | mapper,static                                       |
| mapper                     | http_rest_api                                       |
| http_rest_api              | po                                                  |
| mapper                     | vo                                                  |



ERP进销存管理系统的客户端开发包图如下图所示

![开发包图 _1_.png](https://s2.loli.net/2022/07/08/gxCpAVmuHzhesTE.png)

ERP进销存管理系统的服务器端开发包图如下图所示

![服务器端包图 _1_.png](https://s2.loli.net/2022/07/09/GIEbVvyklnemUST.png)

### 4.2 运行时进程

- 在ERP系统中，会有多个客户端进程和一个服务端进程，其进程图如下图所示

- 示意图：

  ![进程图](https://se-image.oss-cn-shanghai.aliyuncs.com/img/%E8%BF%9B%E7%A8%8B%E5%9B%BE.png)


### 4.3 物理部署

- 部署图如下所示

![5ae5be27e4b039625af793c0](https://se-image.oss-cn-shanghai.aliyuncs.com/img/5ae5be27e4b039625af793c0.png)

## 5 接口视角

### 5.1模块的职责

#### 5.1.1模块视图

客户端模块和服务器端模块视图及客户端各层和服务器端各层的职责分别如下图所示。

##### 客户端模块视图

![image-20210522154743898](https://lluviasnowb01.oss-cn-hangzhou.aliyuncs.com/img/image-20210522154743898.png)

##### 服务器端模块视图

![image-20210522154806960](https://lluviasnowb01.oss-cn-hangzhou.aliyuncs.com/img/image-20210522154806960.png)

#### 5.1.2各层职责

##### 客户端各层职责

|       层       | 职责                                         |
| :------------: | -------------------------------------------- |
|   用户界面层   | 展示界面                                     |
|   业务逻辑层   | 对于用户界面的输入进行响应并进行业务处理逻辑 |
|    启动模块    | 负责初始化                                   |
| 客户端网络模块 | 利用 http Rest API通信方式                   |

##### 服务器端各层职责

|       层       | 职责                                         |
| :------------: | -------------------------------------------- |
|   用户界面层   | 展示界面                                     |
|     数据层     | 负责数据的持久化及数据访问接口               |
|   业务逻辑层   | 对于用户界面的输入进行响应并进行业务处理逻辑 |
|    启动模块    | 负责初始化                                   |
| 客户端网络模块 | 利用 http Rest API通信方式                   |

##### 层之间调用接口

每一层只是使用下方直接接触的层，层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如下表所示。

<table>
   <tr>
      <td>接口</td>
      <td>服务调用方</td>
      <td>服务提供方</td>
   </tr>
   <tr>
      <td>AccountService</td>
      <td>服务器端展示层</td>
      <td>服务器端业务逻辑层</td>
   </tr>
    <tr>
      <td>BusinessHistoryService</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>CategoryService</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>ClockInService</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>FileService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>CustomerService</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>EmployeeService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>PaySheetService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>ProductService</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>PurchaseService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>PurchaseReturnsService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>ReceiptSheetService</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>SalaryService</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>SaleDetailService</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>SaleService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>UserService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>WarehouseExcelService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>WarehouseService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>InitialAccountService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>YearEndBonusService</td>
      <td></td>
      <td></td>
   </tr>
        <tr>
      <td>SaleStatusService</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>AccountDao</td>
      <td>服务器端业务逻辑层</td>
      <td>服务器端数据层</td>
   </tr>
   <tr>
      <td>BusinessHistoryDao</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>CategoryDao</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>ClockInDao</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>CustomerDao</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>EmployeeDao</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>InitialAccountDao</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>PaySheetDao</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>ProductDao</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>PurchaseReturnsSheetDao</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>PurchaseSheetDao</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>ReceiptSheetDao</td>
      <td></td>
      <td></td>
   </tr>
     <tr>
      <td>SalaryDao</td>
      <td></td>
      <td></td>
             <tr>
      <td>YearEndBonusDao</td>
      <td></td>
      <td></td>
   </tr>    <tr>
      <td>SaleStatusDao</td>
      <td></td>
      <td></td>
   </tr>
   </tr>   <tr>
      <td>AccountController</td>
      <td>客户端展示层层</td>
      <td>服务器端业务逻辑层</td>
   </tr>
   <tr>
      <td>BusinessHistoryController</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>SaleDetailController</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>PayController</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>ReceiptController</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>SalaryController</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>EmployeeController</td>
      <td></td>
      <td></td>
   </tr>
    <tr>
      <td>ClockInController</td>
      <td></td>
      <td></td>
   </tr>    <tr>
      <td>SaleStatusController</td>
      <td></td>
      <td></td>
   </tr>    <tr>
      <td>InitialAccountController</td>
      <td></td>
      <td></td>
   </tr>    <tr>
      <td>YearEndBonusController</td>
      <td></td>
      <td></td>
   </tr>
</table>









每一层都是由上层依赖建立了一个接口（需接口），而下层实现这个接口（供接口）。



### 5.2用户界面层分解

根据需求，新增用户界面如下图所示。其中，制定促销策略包含在销售界面内。

![用户界面分解.png](https://s2.loli.net/2022/07/08/kiXKGL5gFtRb8qe.png)

#### 5.2.1职责

##### 需要的服务接口

|          服务名           | 服务                       |
| :-----------------------: | -------------------------- |
|     AccountController     | 负责账户管理相关服务       |
| BusinessHistoryController | 负责查看经营历程表相关服务 |
|   SaleDetailController    | 负责查看销售明细表相关服务 |
|   SaleStatusController    | 负责查看经营情况表相关服务 |
|       PayController       | 负责制定付款单服务         |
|     ReceiptController     | 负责制定收款单相关服务     |
|     SalaryController      | 负责制定工资单相关服务     |
|  YearEndBonusController   | 负责制定年终奖相关服务     |
| InitialAccountController  | 负责期初建账相关服务       |
|    EmployeeController     | 负责员工管理相关服务       |
|     ClockInController     | 负责员工打卡服务           |

#### 5.2.2接口规范

##### AccountController相关规范

<table>
	<tr>
		<td>AccountController.addCustomer</td>
		<td>语法</td>
		<td>Response addCustomer(@RequestBody AccountVO accountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启新增账户流程</td>
	</tr>
    <tr>
		<td>AccountController.deleteCustomer</td>
		<td>语法</td>
		<td>Response deleteCustomer(@RequestParam String name)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统删除对应账户信息</td>
	</tr>
    <tr>
		<td>AccountController.updateCustomer</td>
		<td>语法</td>
		<td>Response updateCustomer(@RequestBody AccountVO accountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启编辑账户信息流程</td>
	</tr>
        <tr>
		<td>AccoutController.queryAll</td>
		<td>语法</td>
		<td>Response queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统获得所有账户信息并展示</td>
	</tr>
</table>

##### BusinessHistoryController相关规范

<table>
	<tr>
		<td>BusinessHistoryController.getSaleDetail</td>
		<td>语法</td>
		<td>Response getSaleDetail(@RequestParam String type,
                                  @RequestParam String beginTimeStr,
                                  @RequestParam String endTimeStr,
                                  @RequestParam String customer,
                                  @RequestParam String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个BusinessHistoryService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找对应时间段的对应类型表单并返回给用户</td>
	</tr>
</table>

##### SaleDetailController相关规范

<table>
	<tr>
		<td>SaleDetailController.getSaleDetail</td>
		<td>语法</td>
		<td>SaleDetailController(SaleDetailService saleDetailService)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleDetailService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找对应时间段的对应类型表单并返回给用户</td>
	</tr>
    <tr>
		<td>SaleDetailController.WriteExcel</td>
		<td>语法</td>
		<td>void WriteExcel(HttpServletResponse response)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleDetailService对象，用户已登录且为财务人员用户，销售明细表已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统把表单以excel形式导出到本地并提示用户导出成功</td>
	</tr>
</table>
##### SaleStatusController相关规范

<table>
	<tr>
		<td>SaleStatusController.makeSheet</td>
		<td>语法</td>
		<td>SaleStatusController.makeSheet(String beginTimeStr, String endTimeStr)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启查找经营情况表流程</td>
	</tr>
    <tr>
		<td>SaleStatusController.redFlush</td>
		<td>语法</td>
		<td>SaleStatusController.redFlush(SaleStatusVO saleStatusVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启红冲流程</td>
	</tr>
    	<tr>
		<td>SaleStatusController.queryAll</td>
		<td>语法</td>
		<td>SaleStatusController.queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找所有表单并返回给用户</td>
	</tr>
</table>



##### PayController相关规范

<table>
	<tr>
		<td>PayController.makePaySheet</td>
		<td>语法</td>
		<td>Response makePaySheet(UserVO userVO, @RequestBody PaySheetVO paySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启制定付款单流程，填写信息</td>
	</tr>
    	<tr>
		<td>PayController.showSheetByState</td>
		<td>语法</td>
		<td>Response showSheetByState(@RequestParam(value = "state", required = false) PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户付款单列表</td>
	</tr>
    	<tr>
		<td>PayController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("paySheetId") String paySheetId,
                                  @RequestParam("state") PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据通过第一级审批</td>
	</tr>
    	<tr>
		<td>PayController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("paySheetId") String paySheetId,
                                   @RequestParam("state") PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则，单据通过第一级审批</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据通过第二级审批</td>
	</tr>

##### ReceiptController相关规范

<table>
	<tr>
		<td>ReceiptController.makeReceiptSheet</td>
		<td>语法</td>
		<td>Response makeReceiptSheet(UserVO userVO, @RequestBody ReceiptSheetVO receiptSheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开始制定收款单流程</td>
	</tr>
    <tr>
		<td>ReceiptController.showSheetByState</td>
		<td>语法</td>
		<td>Response showSheetByState(@RequestParam(value = "state", required = false) ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开始展示给用户单据流程</td>
	</tr>
    <tr>
		<td>ReceiptController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("receiptSheetId") String receiptSheetId,
                                  @RequestParam("state") ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第一级审批</td>
	</tr>
    <tr>
		<td>ReceiptController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("receiptSheetId") String receiptSheetId,
                                   @RequestParam("state") ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第二级审批</td>
	</tr>
</table>

##### SalaryController相关规范

<table>
	<tr>
		<td>SalaryController.makeSalarySheet</td>
		<td>语法</td>
		<td>Response makeSalarySheet(@RequestParam String employeeId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启创建工资单流程，将创建的工资单添加至审批列表中</td>
	</tr>
	<tr>
		<td>SalaryController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("salarySheetId") String salarySheetId,
                                  @RequestParam("state") SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第一级审批</td>
	</tr>
    	<tr>
		<td>SalaryController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("salarySheetId") String salarySheetId,
                                   @RequestParam("state") SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第二级审批</td>
	</tr>
##### YearEndBonusController相关规范
##### YearEndBonusController相关规范
##### YearEndBonusController相关规范

<table>
	<tr>
		<td>YearEndBonusController.giveBonus</td>
		<td>语法</td>
		<td>Response giveBonus(SalarySheetVO salarySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个YearEndBonusService对象，用户已登录且为总经理用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统在工资单基础上开启制定年终奖流程，填写信息</td>
	</tr>








##### InitialAccountController相关规范

<table>
	<tr>
		<td>InitialAccountController.initialAccount</td>
		<td>语法</td>
		<td>Response InitialAccount(@RequestBody InitialAccountVO initialAccountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个InitialAccountService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启期初建账流程</td>
	</tr>
</table>



##### EmployeeController相关规范

<table>
	<tr>
		<td>EmployeeController.createEmployee</td>
		<td>语法</td>
		<td>Response createEmployee(@RequestBody EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启新增员工流程</td>
	</tr>
    	<tr>
		<td>EmployeeController.updateEmployee</td>
		<td>语法</td>
		<td>Response updateEmployee(@RequestBody EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启编辑员工信息流程</td>
	</tr>	<tr>
		<td>EmployeeController.query</td>
		<td>语法</td>
		<td>Response queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找员工并返回给用户</td>
	</tr>
</table>

##### ClockInController相关规范

<table>
	<tr>
		<td>ClockInController.createClockIn</td>
		<td>语法</td>
		<td>Response createClockIn(@RequestParam ClockInPO clockInPo)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ClockInService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统提示用户打卡成功并为用户打卡天数+1</td>
	</tr>	<tr>
		<td>ClockInController.findByTelenum</td>
		<td>语法</td>
		<td>Response findByTelenum(@RequestParam String telephone , @RequestParam String name)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ClockInService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统返回用户打卡情况</td>
	</tr>
</table>





#### 5.2.3 用户界面层考试模块设计原理

用户界面层考试模块利用vue及vuetify组件库，配合JavaScript来实现。

### 5.3业务逻辑层的分解

​	业务逻辑层包括多个针对界面的业务逻辑处理对象，大致分为两层，分别为controller层和service层。其中controller层会处理用户界面发来的请求，并调用相应的service进行处理，将结果返回给用户或是向用户显示信息。业务逻辑层的设计如下图所示。

![业务逻辑层分解.png](https://s2.loli.net/2022/07/08/1fcPSkqC68YbWNv.png)

#### 5.3.1业务逻辑层模块的职责

业务逻辑层模块的职责如下表所示

##### 5.3.2.1Controller层

|           模块            | 职责                                                         |
| :-----------------------: | ------------------------------------------------------------ |
|     AccountController     | 负责处理用户发来的账户管理相关的请求并调用AccountService中对应的业务逻辑 |
| BusinessHistoryController | 负责处理用户发来的查询经营历程表相关的请求并调用BusinessHistoryService中对应的业务逻辑 |
|   SaleDetailController    | 负责处理用户发来的查看销售明细表相关的请求并调用SaleDetailService中对应的业务逻辑 |
|       PayController       | 负责处理用户发来的制定付款单相关的请求并调用PaySheetService中对应的业务逻辑 |
|     ReceiptController     | 负责处理用户发来的制定收款单相关的请求并调用ReceiptSheetService中对应的业务逻辑 |
|     SalaryController      | 负责处理用户发来的制定工资单相关的请求并调用SalaryService中对应的业务逻辑 |
|    EmployeeController     | 负责处理用户发来的员工管理相关的请求并调用EmployeeService中对应的业务逻辑 |
|     ClockInController     | 负责处理用户发来的员工打卡相关的请求并调用ClockInService中对应的业务逻辑 |

##### 5.3.2.2Service层

|          模块          | 职责                                 |
| :--------------------: | :----------------------------------- |
|     AccountService     | 负责实现账户管理相关的业务逻辑       |
| BusinessHistoryService | 负责实现查询经营历程表相关的业务逻辑 |
|   SaleDetailService    | 负责实现查看销售明细表相关的业务逻辑 |
|    PaySheetService     | 负责实现制定付款单相关的业务逻辑     |
|  ReceiptSheetService   | 负责实现制定收款单相关的业务逻辑     |
|     SalaryService      | 负责实现制定工资单相关的业务逻辑     |
|    EmployeeService     | 负责实现员工管理相关的业务逻辑       |
|     ClockInService     | 负责实现员工打卡相关的业务逻辑       |

#### 5.3.2业务逻辑层模块的接口规范

##### 5.3.2.1Controller层

##### AccountController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>AccountController.addCustomer</td>
		<td>语法</td>
		<td>Response addCustomer(@RequestBody AccountVO accountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启新增账户流程</td>
	</tr>
    <tr>
		<td>AccountController.deleteCustomer</td>
		<td>语法</td>
		<td>Response deleteCustomer(@RequestParam String name)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统删除对应账户信息</td>
	</tr>
    <tr>
		<td>AccountController.updateCustomer</td>
		<td>语法</td>
		<td>Response updateCustomer(@RequestBody AccountVO accountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启编辑账户信息流程</td>
	</tr>
        <tr>
		<td>AccoutController.queryAll</td>
		<td>语法</td>
		<td>Response queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个AccountService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统获得所有账户信息并展示</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                            | 服务         |
| ------------------------------------------------- | ------------ |
| AccountService.addAccount(AccountVO  accountVO)   | 新建账户     |
| AccountService.deleteAccount(String name)         | 删除账户     |
| AccountService.updateAccount(AccountVO accountVO) | 编辑账户信息 |
| AccountService.queryAll()                         | 查询账户     |

##### BusinessHistoryController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>BusinessHistoryController.getSaleDetail</td>
		<td>语法</td>
		<td>Response getSaleDetail(@RequestParam String type,
                                  @RequestParam String beginTimeStr,
                                  @RequestParam String endTimeStr,
                                  @RequestParam String customer,
                                  @RequestParam String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个BusinessHistoryService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找对应时间段的对应类型表单并返回给用户</td>
	</tr>
</table>




###### 需要的服务（需接口）

| 服务名                                                       | 服务               |
| ------------------------------------------------------------ | ------------------ |
| BusinessHistoryService.selectSaleSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择销售单类型     |
| BusinessHistoryService.selectSaleReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择销售退货单类型 |
| BusinessHistoryService.selectPurchaseSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择进货单类型     |
| BusinessHistoryService.selectPurchaseReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择进货退货单类型 |
| BusinessHistoryService.selectReceiptSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择收款单类型     |
| BusinessHistoryService.selectPaySheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 选择付款单类型     |

##### SaleDetailController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SaleDetailController.getSaleDetail</td>
		<td>语法</td>
		<td>SaleDetailController(SaleDetailService saleDetailService)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleDetailService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找对应时间段的对应类型表单并返回给用户</td>
	</tr>
    <tr>
		<td>SaleDetailController.WriteExcel</td>
		<td>语法</td>
		<td>void WriteExcel(HttpServletResponse response)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleDetailService对象，用户已登录且为财务人员用户，销售明细表已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统把表单以excel形式导出到本地并提示用户导出成功</td>
	</tr>
</table>

###### 需要的服务（需接口）

| 服务名                                                       | 服务                       |
| ------------------------------------------------------------ | -------------------------- |
| SaleDetailService.getSaleDetail(String beginTimeStr, String endTimeStr, String proName, String customer, String operator) | 获取一个时间段内的销售明细 |
| SaleDetailService.WriteExcel(HttpServletResponse response)   | 导出销售明细表至本地       |

##### SaleStatusController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SaleStatusController.makeSheet</td>
		<td>语法</td>
		<td>SaleStatusController.makeSheet(String beginTimeStr, String endTimeStr)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启查找经营情况表流程</td>
	</tr>
    <tr>
		<td>SaleStatusController.redFlush</td>
		<td>语法</td>
		<td>SaleStatusController.redFlush(SaleStatusVO saleStatusVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启红冲流程</td>
	</tr>
    	<tr>
		<td>SaleStatusController.queryAll</td>
		<td>语法</td>
		<td>SaleStatusController.queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SaleStatusService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找所有表单并返回给用户</td>
	</tr>
</table>



###### 需要的服务（需接口）

| 服务名                                                       | 服务                     |
| ------------------------------------------------------------ | ------------------------ |
| SaleStatusService.makeSheet(String beginTimeStr, String endTimeStr) | 查找对应时间段经营情况表 |
| SaleStatusService.redFlush(SaleStatusVO saleStatusVO)        | 红冲                     |
| SaleStatusService.queryAll()                                 | 查找所有经营情况表       |

##### PayController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>PayController.makePaySheet</td>
		<td>语法</td>
		<td>Response makePaySheet(UserVO userVO, @RequestBody PaySheetVO paySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启制定付款单流程，填写信息</td>
	</tr>
    	<tr>
		<td>PayController.showSheetByState</td>
		<td>语法</td>
		<td>Response showSheetByState(@RequestParam(value = "state", required = false) PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户付款单列表</td>
	</tr>
    	<tr>
		<td>PayController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("paySheetId") String paySheetId,
                                  @RequestParam("state") PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据通过第一级审批</td>
	</tr>
    	<tr>
		<td>PayController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("paySheetId") String paySheetId,
                                   @RequestParam("state") PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个PaySheetService对象，用户已登录且为财务人员用户，输入输出符合规则，单据通过第一级审批</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据通过第二级审批</td>
	</tr>


</table>


###### 需要的服务（需接口）

| 服务名                                                       | 服务           |
| ------------------------------------------------------------ | -------------- |
| PaySheetService.makePaySheet(UserVO userVO, PaySheetVO paySheetVO) | 制定付款单     |
| PaySheetService.getSheetByState(PaySheetState state)         | 获取付款单信息 |
| PaySheetService.approval(String paySheetId, PaySheetState  state) | 审批付款单     |

##### ReceiptController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>ReceiptController.makeReceiptSheet</td>
		<td>语法</td>
		<td>Response makeReceiptSheet(UserVO userVO, @RequestBody ReceiptSheetVO receiptSheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开始制定收款单流程</td>
	</tr>
    <tr>
		<td>ReceiptController.showSheetByState</td>
		<td>语法</td>
		<td>Response showSheetByState(@RequestParam(value = "state", required = false) ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开始展示给用户单据流程</td>
	</tr>
    <tr>
		<td>ReceiptController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("receiptSheetId") String receiptSheetId,
                                  @RequestParam("state") ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第一级审批</td>
	</tr>
    <tr>
		<td>ReceiptController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("receiptSheetId") String receiptSheetId,
                                   @RequestParam("state") ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ReceiptSheetService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第二级审批</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                                       | 服务                 |
| ------------------------------------------------------------ | -------------------- |
| ReceiptSheetService.makeReceiptSheet(UserVO userVO, ReceiptSheetVO receiptSheetVO) | 创建收款单           |
| ReceiptSheetService.getSheetByState(ReceiptSheetState state) | 根据单据状态获取单据 |
| ReceiptSheetService.approval(String receiptSheetId, ReceiptSheetState state)审批单据 | 审批单据             |

##### SalaryController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SalaryController.makeSalarySheet</td>
		<td>语法</td>
		<td>Response makeSalarySheet(@RequestParam String employeeId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启创建工资单流程，将创建的工资单添加至审批列表中</td>
	</tr>
	<tr>
		<td>SalaryController.firstApproval</td>
		<td>语法</td>
		<td>Response firstApproval(@RequestParam("salarySheetId") String salarySheetId,
                                  @RequestParam("state") SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第一级审批</td>
	</tr>
    	<tr>
		<td>SalaryController.secondApproval</td>
		<td>语法</td>
		<td>Response secondApproval(@RequestParam("salarySheetId") String salarySheetId,
                                   @RequestParam("state") SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个SalaryService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据完成第二级审批</td>
	</tr>


###### 需要的服务（需接口）

| 服务名                                                       | 服务             |
| ------------------------------------------------------------ | ---------------- |
| SalaryService.makeSalarySheet(String employeeId)             | 创建工资单       |
| SalaryService.approval(String salarySheetId, SalarySheetState state) | 对工资单进行审批 |

##### YearEndBonusController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>YearEndBonusController.giveBonus</td>
		<td>语法</td>
		<td>Response giveBonus(SalarySheetVO salarySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个YearEndBonusService对象，用户已登录且为总经理用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统在工资单基础上开启制定年终奖流程，填写信息</td>
	</tr>



</table>


###### 需要的服务（需接口）

| 服务名                                                     | 服务       |
| ---------------------------------------------------------- | ---------- |
| YearEndBonusService.giveBonus(SalarySheetVO salarySheetVO) | 填写年终奖 |

##### InitialAccountController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>InitialAccountController.initialAccount</td>
		<td>语法</td>
		<td>Response InitialAccount(@RequestBody InitialAccountVO initialAccountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个InitialAccountService对象，用户已登录且为财务人员用户，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启期初建账流程</td>
	</tr>
</table>



###### 需要的服务（需接口）

| 服务名                                                       | 服务     |
| ------------------------------------------------------------ | -------- |
| InitialAccountService.initialAccount(InitialAccountVO initialAccountVO) | 期初建账 |

##### EmployeeController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>EmployeeController.createEmployee</td>
		<td>语法</td>
		<td>Response createEmployee(@RequestBody EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启新增员工流程</td>
	</tr>
    	<tr>
		<td>EmployeeController.updateEmployee</td>
		<td>语法</td>
		<td>Response updateEmployee(@RequestBody EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统开启编辑员工信息流程</td>
	</tr>	<tr>
		<td>EmployeeController.query</td>
		<td>语法</td>
		<td>Response queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个EmployeeService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统查找员工并返回给用户</td>
	</tr>
</table>




###### 需要的服务（需接口）

| 服务名                                                | 服务                         |
| ----------------------------------------------------- | ---------------------------- |
| EmployeeService.createEmployee(EmployeeVO employeeVO) | 创建新的员工信息             |
| EmployeeService.updateEmployee(EmployeeVO employeeVO) | 编辑员工信息                 |
| EmployeeService.queryAll()                            | 查询所有员工信息并返回给用户 |

##### ClockInController相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>ClockInController.createClockIn</td>
		<td>语法</td>
		<td>Response createClockIn(@RequestParam ClockInPO clockInPo)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ClockInService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统提示用户打卡成功并为用户打卡天数+1</td>
	</tr>	<tr>
		<td>ClockInController.findByTelenum</td>
		<td>语法</td>
		<td>Response findByTelenum(@RequestParam String telephone , @RequestParam String name)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>已创建一个ClockInService对象，用户已登录，输入输出符合规则</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统返回用户打卡情况</td>
	</tr>
</table>




###### 需要的服务（需接口）

| 服务名                                            | 服务                           |
| ------------------------------------------------- | ------------------------------ |
| ClockInService.createClockIn(ClockInPO clockInPO) | 员工点击进行打卡               |
| ClockInService.findByTelenum(String telephone)    | 更新员工打卡信息               |
| ClockInService.updateClockIn(ClockInPO clockInPO) | 根据手机号返回员工今日打卡情况 |

##### 5.3.2.2Service层

##### AccountService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>AccountService.addAccount</td>
		<td>语法</td>
		<td>void addAccount(AccountVO accountVO);</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启账户管理-新增流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示创建成功或失败的信息</td>
	</tr>
    	<tr>
		<td>AccountService.updateAccount</td>
		<td>语法</td>
		<td>void updateAccount(AccountVO accountVO);</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启账户管理-编辑流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
    	<tr>
		<td>AccountService.deleteAccount</td>
		<td>语法</td>
		<td>void deleteAccount(String name);</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启账户管理-删除流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示删除成功或失败的信息</td>
	</tr>
    <tr>
		<td>AccountService.queryAll</td>
		<td>语法</td>
		<td>List<AccountVO> queryAll();</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启账户管理-查询流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统列出账户信息</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                        | 服务                       |
| --------------------------------------------- | -------------------------- |
| AccountDao.updateAccount(AccountPO accountPO) | 在数据库中更新账户信息     |
| AccountDao.addAccount(AccountPO accountPO)    | 在数据库中插入新增账户信息 |
| AccountDao.deleteAccount(String name)         | 在数据库中删除所选账户信息 |
| AccountDao.queryAll()                         | 查询数据库中所有账户信息   |

##### BusinessHistoryService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>BusinessHistoryService.selectSaleSheet</td>
		<td>语法</td>
		<td>List<SaleSheetVO> selectSaleSheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询销售单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的销售单情况</td>
	</tr>
    	<tr>
		<td>BusinessHistoryService.selectSaleReturnsSheet</td>
		<td>语法</td>
		<td>List<SaleReturnsSheetVO> selectSaleReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询销售退货单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的销售退货单情况</td>
	</tr>
        	<tr>
		<td>BusinessHistoryService.selectPurchaseSheet</td>
		<td>语法</td>
		<td>List<PurchaseSheetVO> selectPurchaseSheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询进货单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的进货单情况</td>
	</tr>
        	<tr>
		<td>BusinessHistoryService.selectPurchaseReturnsSheet</td>
		<td>语法</td>
		<td>List<PurchaseReturnsSheetVO> selectPurchaseReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询进货退货单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的进货退货单情况</td>
	</tr>
        	<tr>
		<td>BusinessHistoryService.selectReceiptSheet</td>
		<td>语法</td>
		<td>List<ReceiptSheetVO> selectReceiptSheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询收款单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的收款单情况</td>
	</tr>
            	<tr>
		<td>BusinessHistoryService.selectPaySheet</td>
		<td>语法</td>
		<td>List<PaySheetVO> selectPaySheet(String beginTimeStr, String endTimeStr, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启选择查询付款单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户对应时间段的付款单情况</td>
	</tr>


</table>

###### 需要的服务（需接口）

| 服务名                                                       | 服务                                         |
| ------------------------------------------------------------ | -------------------------------------------- |
| BusinessHistoryDao.selectSaleSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有销售表信息     |
| BusinessHistoryDao.selectSaleReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有销售退货表信息 |
| BusinessHistoryDao.selectPurchaseSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有进货表信息     |
| BusinessHistoryDao.selectPurchaseReturnsSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有进货退货表信息 |
| BusinessHistoryDao.selectReceiptSheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有收款表信息     |
| BusinessHistoryDao.selectPaySheet(String beginTimeStr, String endTimeStr, String customer, String operator) | 在数据库中获取对应时间段的所有付款表信息     |

##### SaleDetailService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SaleDetailService.getSaleDetai</td>
		<td>语法</td>
		<td>List<SaleDetailPOJO> getSaleDetail(String beginTimeStr, String endTimeStr, String proName, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>用户选择查看销售明细表，系统开启查看销售明细表流程，用户已选择筛选时间段</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统向用户展示对应时间段的销售明细表</td>
	</tr>
    	<tr>
		<td>SaleDetailService.WriteExcel</td>
		<td>语法</td>
		<td>void WriteExcel(HttpServletResponse response)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>销售明细表已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统把表单以excel形式导出到本地并提示用户导出成功</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                                       | 服务                               |
| ------------------------------------------------------------ | ---------------------------------- |
| SaleDetailSheetDao.GetSaleDetail(String beginTimeStr, String endTimeStr, String proName, String customer, String operator) | 在数据库中获取对应时间段的销售明细 |

##### SaleStatusService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SaleDetailService.getSaleDetai</td>
		<td>语法</td>
		<td>makeSheet(String beginTimeStr, String endTimeStr)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>用户选择查看经营情况表，系统开启查看经营情况表流程，用户已选择筛选时间段</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统向用户展示对应时间段的销售明细表</td>
	</tr>
    	<tr>
		<td>SaleStatusService.redFlush(SaleStatusVO saleStatusVO)</td>
		<td>语法</td>
		<td>redFlush(SaleStatusVO saleStatusVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>经营情况表已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统进行红冲操作，更新数据库</td>
	</tr>
    	<tr>
		<td>SaleStatusService.queryAll()</td>
		<td>语法</td>
		<td>List<SaleStatusVO> queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>用户选择查看经营情况表，系统开启查看经营情况表流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统向用户展示经营情况表</td>
	</tr>
</table>




###### 需要的服务（需接口）

| 服务名                                                       | 服务                                         |
| ------------------------------------------------------------ | -------------------------------------------- |
| saleStatusDao.getSaleSheet(Date beginTime,Date endTime)      | 在数据库中获取对应时间段的销售经营情况表     |
| saleStatusDao.getPurchaseReturnsSheet(Date beginTime, Date endTime) | 在数据库中获取对应时间段的销售退货经营情况表 |
| saleStatusDao.getPurchaseSheet(Date beginTime,Date endTime)  | 在数据库中获取对应时间段的进货经营情况表     |
| saleStatusDao.getSaleReturnsSheet(Date beginTime, Date endTime) | 在数据库中获取对应时间段的进货退货经营情况表 |
| saleStatusDao.getSalarySheet(Date beginTime, Date endTime)   | 在数据库中获取对应时间段的工资经营情况表     |
| saleStatusDao.save(SaleStatusPO saleStatusPO)                | 在数据库中存放经营情况表                     |
| saleStatusDao.queryAll()                                     | 在数据库中查询经营情况表                     |

##### PaySheetService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>PaySheetService.makePaySheet</td>
		<td>语法</td>
		<td>void makePaySheet(UserVO userVO, PaySheetVO paySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启制定付款单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
    <tr>
		<td>PaySheetService.approval</td>
		<td>语法</td>
		<td>void approval(String paySheetId, PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>单据已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据审批通过或被拒绝通过，数据库更新</td>
	</tr>
    <tr>
		<td>PaySheetService.getSheetByState</td>
		<td>语法</td>
		<td>List<PaySheetVO> getSheetByState(PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>单据已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统向用户展示单据信息</td>
	</tr>
</table>

###### 需要的服务（需接口）

| 服务名                                                       | 服务                           |
| ------------------------------------------------------------ | ------------------------------ |
| PaySheetDao.getLatestSheet()                                 | 在数据库中查询最近的付款单     |
| PaySheetDao.saveBatchSheetContent(List<PaySheetContentPO> pContentPOList) | 在数据库中插入单据信息         |
| PaySheetDao.saveSheet(PaySheetPO paySheetPO)                 | 在数据库中保存单据             |
| PaySheetDao.findSheetById(String  paySheetId)                | 在数据库中根据单据id查找单据   |
| PaySheetDao.updateSheetState(String  paySheetId,PaySheetState state) | 在数据库中更新单据状态         |
| PaySheetDao.updateSheetStateOnPrev(String paySheetId, PaySheetState PrevState,  PaySheetState state | 在数据库中更新单据状态         |
| PaySheetDao.findContentById(String PaySheetId)               | 在数据库中根据id查找单据内容   |
| AccountDao.findOneByName(String account)                     | 在数据库中根据账户名查找单据   |
| PaySheetDao.findAll()                                        | 在数据库中查找所有单据         |
| PaySheetDao.findAllbyState(PaySheetState state)              | 在数据库中根据单据状态查找单据 |

##### ReceiptSheetService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>ReceiptSheetService.makeReceiptSheet</td>
		<td>语法</td>
		<td>void makeReceiptSheet(UserVO userVO, ReceiptSheetVO receiptSheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启制定收款单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
    <tr>
		<td>ReceiptSheetService.approval</td>
		<td>语法</td>
		<td>void approval(String receiptSheetId, ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>单据已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据被审批通过或拒绝不通过</td>
	</tr>
    <tr>
		<td>ReceiptSheetService.getSheetByState</td>
		<td>语法</td>
		<td>List<ReceiptSheetVO> getSheetByState(ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>单据已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统根据单据状态获取单据，展示给用户</td>
	</tr>
</table>

###### 需要的服务（需接口）

| 服务名                                                       | 服务                                 |
| ------------------------------------------------------------ | ------------------------------------ |
| ReceiptSheetDao.getLatestSheet()                             | 在数据库中获取最近的收款单           |
| ReceiptSheetDao.saveBatchSheetContent(List<ReceiptSheetContentPO> receiptSheetContent) | 在数据库中插入单据内容               |
| ReceiptSheetDao.saveSheet(ReceiptSheetPO receiptSheetPO)     | 在数据库中存入单据                   |
| ReceiptSheetDao.findSheetById(String receiptSheetId)         | 在数据库中根据id查询收款单           |
| ReceiptSheetDao.updateSheetState(String receiptSheetId, ReceiptSheetState state) | 在数据库中更新单据状态               |
| ReceiptSheetDao.updateSheetStateOnPrev(String receiptSheetId, ReceiptSheetState PrevState, ReceiptSheetState state) | 在数据库中更新单据状态               |
| CustomerDao.findOneByName(String account)                    | 在数据库中根据客户姓名获取收款单     |
| ReceiptSheetDao.findAll()                                    | 在数据库中查找所有收款单             |
| ReceiptSheetDao.findAllByState(ReceiptSheetState state)      | 在数据库中根据单据状态查找所有收款单 |
| ReceiptSheetDao.findContentById(String receiptSheetId)       | 在数据库中根据单据id查找收款单内容   |

##### SalaryService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>SalaryService.calculate_tax</td>
		<td>语法</td>
		<td>BigDecimal calculate_tax(String tax, BigDecimal raw_salary)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启创建工资单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>缴税计算完毕，自动填入工资单</td>
	</tr>
    	<tr>
		<td>SalaryService.makeSalarySheet</td>
		<td>语法</td>
		<td>void makeSalarySheet(String employeeId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启创建工资单流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
    	<tr>
		<td>SalaryService.approval</td>
		<td>语法</td>
		<td>void approval(String salarySheetId, SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>单据已生成</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>单据被审批通过或拒绝不通过</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                                       | 服务                       |
| ------------------------------------------------------------ | -------------------------- |
| EmployeeDao.getOneById(String employeeId)                    | 在数据库中根据id查找员工   |
| SalaryDao.save(SalarySheetPO salarySheetPO)                  | 在数据库中插入工资单       |
| SalaryDao.findSheetById(String salarySheetId)                | 在数据库中根据id查找工资单 |
| SalaryDao.updateSheetState(String salarySheetId, SalarySheetState state) | 在数据库中更新工资单状态   |
| SalaryDao.updateSheetStateOnPrev(String salarySheetId, SalarySheetState PrevState, SalarySheetState state) | 在数据库中更新工资单状态   |

##### YearEndBonusService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>YearEndBonusService.giveBonus</td>
		<td>语法</td>
		<td>void giveBonus(SalarySheetVO salarySheetVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启制定工资单流程，用户为总经理</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>工资单中填入年终奖完毕，数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
</table>



###### 需要的服务（需接口）

| 服务名                                      | 服务                     |
| ------------------------------------------- | ------------------------ |
| salaryDao.save(SalarySheetPO salarySheetPO) | 在数据库中存放工资单     |
| employeeDao.getOneById(Integer id)          | 在数据库中根据id查找员工 |

##### InitialAccountService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>InitialAccountService.initialAccount</td>
		<td>语法</td>
		<td>void initialAccount(InitialAccountVO initialAccountVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>用户选择期初建账，系统开启期初建账流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
</table>


###### 需要的服务（需接口）

| 服务名                                                       | 服务                               |
| ------------------------------------------------------------ | ---------------------------------- |
| saleSheetDao.findContentByTime(String name,Date firstTime,Date latestTime) | 在数据库中获取对应时间段的销售明细 |
| purchaseSheetDao.findContentByTime(String name,Date firstTime,Date latestTime) | 在数据库中获取对应时间段的进货单   |
| productDao.findById(String id）                              | 在数据库中根据商品id查找商品       |
| customerService.findCustomerById(Interger id)                | 在数据库中根据客户id查找客户       |
| initialAccountDao.save(InitialAccountPO initialAccountPO)    | 在数据库中插入系统最初信息         |
| productDao.createProduct(ProductPO productPO)                | 在数据库中插入新的商品信息         |
| customerDao.createCustomer(CustomerPO customerPO)            | 在数据库中插入新的客户信息         |
| accountDao.addAccount(AccountPO accountPO)                   | 在数据库中插入新的账户信息         |

##### EmployeeService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>EmployeeService.createEmployee</td>
		<td>语法</td>
		<td>void createEmployee(EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启新建员工信息流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
    	<tr>
		<td>EmployeeService.updateEmployee</td>
		<td>语法</td>
		<td>void updateEmployee(EmployeeVO employeeVO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启编辑员工信息流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新完毕，更新流程结束，向用户展示更新成功或失败的信息</td>
	</tr>
        	<tr>
		<td>EmployeeService.queryAll</td>
		<td>语法</td>
		<td>List<EmployeeVO> queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>用户跳转至员工管理界面</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户员工信息</td>
	</tr>

</table>

###### 需要的服务（需接口）

| 服务名                                    | 服务                         |
| ----------------------------------------- | ---------------------------- |
| EmployeeDao.add(EmployeePO employeePO)    | 在数据库中插入新增员工       |
| UserService.register(UserVO userVO)       | 在数据库中为新增员工注册账号 |
| EmployeeDao.update(EmployeePO employeePO) | 在数据库中更新员工信息       |
| EmployeeDao.queryAll()                    | 在数据库中查询所有员工信息   |

##### ClockInService相关规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>ClockInService.createClockIn</td>
		<td>语法</td>
		<td>void createClockIn(ClockInPO clockInPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启员工打卡流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统提示用户打卡成功并为用户打卡天数+1</td>
	</tr>
    	<tr>
		<td>ClockInService.updateClockIn</td>
		<td>语法</td>
		<td>void updateClockIn(ClockInPO clockInPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启更新打卡信息流程</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户打卡信息</td>
	</tr>
        	<tr>
		<td>ClockInService.findByTelenum</td>
		<td>语法</td>
		<td>List<ClockInPO> findByTelenum(String telenum)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>系统开启查询打卡情况流程</td>
	</tr>
    	<tr>
		<td></td>
		<td>后置条件</td>
		<td>系统展示给用户电话号码对应用户的今日打卡情况</td>
	</tr>

</table>

###### 需要的服务（需接口）

| 服务名                                        | 服务                                       |
| --------------------------------------------- | ------------------------------------------ |
| ClockInDao.createClockIn(ClockInPO clockInPO) | 在数据库中为对应员工打卡天数+1             |
| ClockInDao.updateClockIn(ClockInPO clockInPO) | 在数据库中更新员工打卡信息                 |
| ClockInDao.findByTelenum(String telenum)      | 在数据库中查询对应手机号对应用户的打卡情况 |

##### 

### 5.4数据层的分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、单、改、查。本项目业务逻辑需要的服务由数据层的AccountDao、BusinessHistoryDao、SaleDetailSheetDao、PaySheetDao、ReceiptSheetDao、SalaryDao、EmployeeDao、ClockInDao接口提供服务，接口主要是对于数据库形式的持久化数据提供数据访问服务。

#### 5.4.1数据层模块的职责

数据层模块的职责由下表所示。

| 模块               | 职责                                                         |
| ------------------ | ------------------------------------------------------------ |
| AccountDao         | 账户管理数据库的接口。提供账户管理的集体载入，增，删，改，查等服务。 |
| BusinessHistoryDao | 查询经营历程表的接口。提供经营历程表的查询、选择类型服务。   |
| SaleDetailSheetDao | 查看销售明细表的接口。提供销售明细表的查询、选择类型的服务。 |
| PaySheetDao        | 制定付款单的接口。提供制定付款单的增删改查服务。             |
| ReceiptSheetDao    | 制定收款单的接口。提供制定收款单的增删改查服务。             |
| SalaryDao          | 制定工资单的接口。提供制定工资单的增删改查服务。             |
| EmployeeDao        | 员工管理的接口。提供员工的集体载入，增，删，改，查等服务。   |
| ClockInDao         | 员工打卡的接口。提供员工打卡的输入信息、更新、查询服务。     |
| InitialAccountDao  | 初期建账接口，提供保存初期账目的接口。                       |
| SaleStatusDao      | 查看经营情况表的接口。提供经营情况表的查看接口，红冲接口。   |

#### 5.4.2数据层模块的接口规范

##### AccountDao模块的接口规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>AccountDao.addAccount</td>
		<td>语法</td>
		<td>int addAccount(AccountPO accountPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中没有相同name的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库中插入新数据</td>
	</tr>
    <tr>
		<td>AccountDao.deleteAccount</td>
		<td>语法</td>
		<td>int deleteAccount(String name)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库存在此name对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>从数据库删除此对象</td>
	</tr>
    <tr>
		<td>AccountDao.updateAccount</td>
		<td>语法</td>
		<td>int updateAccount(AccountPO accountPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库存在相同name的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库中更新新数据</td>
	</tr>
    <tr>
		<td>AccountDao.findOneByName</td>
		<td>语法</td>
		<td>AccountPO findOneByName(String account)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库存在相同name的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>AccountDao.queryAll()</td>
		<td>语法</td>
		<td> List<AccountPO> queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### BusinessHistoryDao模块的接口规范

###### 提供的服务（供接口）

<table>
	<tr>
		<td>BusinessHistoryDao.selectSaleSheet</td>
		<td>语法</td>
		<td>List<SaleSheetPO> selectSaleSheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>BusinessHistoryDao.selectSaleReturnsSheet</td>
		<td>语法</td>
		<td>List<SaleReturnsSheetPO> selectSaleReturnsSheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
     <tr>
		<td>BusinessHistoryDao.selectPurchaseSheet</td>
		<td>语法</td>
		<td>List<PurchaseSheetPO> selectPurchaseSheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
     <tr>
		<td>BusinessHistoryDao.selectPurchaseReturnsSheet</td>
		<td>语法</td>
		<td>List<PurchaseReturnsSheetPO> selectPurchaseReturnsSheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
     <tr>
		<td>BusinessHistoryDao.selectPaySheet</td>
		<td>语法</td>
		<td>List<PaySheetPO> selectPaySheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
     <tr>
		<td>BusinessHistoryDao.selectReceiptSheet</td>
		<td>语法</td>
		<td> List<ReceiptSheetPO> selectReceiptSheet(Date beginTime, Date endTime, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### SaleDetailSheetDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>SaleDetailSheetDao.insert</td>
		<td>语法</td>
		<td>List<SaleDetailPOJO> GetSaleDetail(Date beginTime, Date endTime, String proName, String customer, String operator)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>

</table>

##### PaySheetDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>PaySheetDao.getLatestSheet</td>
		<td>语法</td>
		<td>ReceiptSheetPO getLatestSheet()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>PaySheetDao.saveBatchSheetContent</td>
		<td>语法</td>
		<td>void saveBatchSheetContent(List<PaySheetContentPO> pContentPOList)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库中插入新数据</td>
	</tr>
       <tr>
		<td>PaySheetDao.saveSheet</td>
		<td>语法</td>
		<td>void saveSheet(PaySheetPO paySheetPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>可数据库插入新数据</td>
	</tr>
    <tr>
		<td>PaySheetDao.findSheetById</td>
		<td>语法</td>
		<td>PaySheetPO findSheetById(String paySheetId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>PaySheetDao.updateSheetState</td>
		<td>语法</td>
		<td>int updateSheetState(String paySheetId, PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>PaySheetDao.updateSheetStateOnPrev</td>
		<td>语法</td>
		<td>int updateSheetStateOnPrev(String paySheetId, PaySheetState prevState, PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>PaySheetDao.findContentById</td>
		<td>语法</td>
		<td>List<PaySheetContentPO> findContentById(String paySheetId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>PaySheetDao.findAll()</td>
		<td>语法</td>
		<td>List<PaySheetPO> findAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>PaySheetDao.findAllbyState</td>
		<td>语法</td>
		<td>List<PaySheetPO> findAllbyState(PaySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同state的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### ReceiptSheetDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>ReceiptSheetDao.getLatestSheet</td>
		<td>语法</td>
		<td>ReceiptSheetPO getLatestSheet()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.saveBatchSheetContent</td>
		<td>语法</td>
		<td>void saveBatchSheetContent(List<ReceiptSheetContentPO> rContentPOList)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库中插入新数据</td>
	</tr>
       <tr>
		<td>ReceiptSheetDao.saveSheet</td>
		<td>语法</td>
		<td>void saveSheet(ReceiptSheetPO ReceiptSheetPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>可数据库插入新数据</td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.findSheetById</td>
		<td>语法</td>
		<td>ReceiptSheetPO findSheetById(String ReceiptSheetId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.updateSheetState</td>
		<td>语法</td>
		<td>int updateSheetState(String receiptSheetId, ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.updateSheetStateOnPrev</td>
		<td>语法</td>
            <td>int updateSheetStateOnPrev(String receiptSheetId, ReceiptSheetState prevState, ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.findContentById</td>
		<td>语法</td>
		<td>List<ReceiptSheetContentPO> findContentById(String receiptSheetId)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.findAll()</td>
		<td>语法</td>
		<td>List<ReceiptSheetPO> findAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>ReceiptSheetDao.findAllbyState</td>
		<td>语法</td>
		<td>List<ReceiptSheetPO> findAllbyState(ReceiptSheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同state的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>

##### SalaryDao模块的接口规范

###### 提供的接口（供接口）

<table>
    <tr>
		<td>SalaryDao.save</td>
		<td>语法</td>
		<td>int save(SalarySheetPO Save))</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SalaryDao.findSheetById</td>
		<td>语法</td>
		<td>SalarySheetPO  findSheetById(int id)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SalaryDao.updateSheetState</td>
		<td>语法</td>
		<td>int updateSheetState(String id, SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同state对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SalaryDao.updateSheetStateOnPrev</td>
		<td>语法</td>
		<td>int updateSheetStateOnPrev(String sheetId, SalarySheetState prev, SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同sheetId的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>SalaryDao.findAllSheet()</td>
		<td>语法</td>
		<td>List<SalarySheetPO> findAllSheet()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SalaryDao.findAllSheetByState</td>
		<td>语法</td>
		<td>List<SalarySheetPO> findAllSheetByState(SalarySheetState state)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同state的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### EmployeeDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>EmployeeDao.add</td>
		<td>语法</td>
		<td>void add(EmployeePO employeePO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>EmployeeDao.update</td>
		<td>语法</td>
		<td>void update(EmployeePO employeePO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中有相同id对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>更新数据库数据</td>
	</tr>
    <tr>
		<td>EmployeeDao.queryAll</td>
		<td>语法</td>
		<td>List<EmployeePO> queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>EmployeeDao.getOneById</td>
		<td>语法</td>
		<td>EmployeePO getOneById( int id)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中有相同id对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### ClockInDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>ClockInDao.createClockIn</td>
		<td>语法</td>
		<td>void createClockIn(ClockInPO clockInPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库中插入新数据</td>
	</tr>
    	<tr>
		<td>ClockInDao.updateClockIn</td>
		<td>语法</td>
		<td>void updateClockIn(ClockInPO clockInPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库有相同id的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td>数据库更新数据</td>
	</tr>
    	<tr>
		<td>ClockInDao.findByTelenum</td>
		<td>语法</td>
		<td>List<ClockInPO> findByTelenum(String telenum)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td>数据库中存在相同teleNum的对象</td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>


##### InitialAccountDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>InitialAccountDao.save</td>
		<td>语法</td>
		<td>save(InitialAccountPO initialAccountPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>

</table>


##### SaleStatusDao模块的接口规范

###### 提供的接口（供接口）

<table>
	<tr>
		<td>SaleStatusDao.getSaleSheet</td>
		<td>语法</td>
		<td>List<SaleSheetPO> getSaleSheet(Date beginTime, Date endTime)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.getPurchaseReturnsSheet</td>
		<td>语法</td>
		<td>List<PurchaseReturnsSheetPO> getPurchaseReturnsSheet(Date beginTime, Date endTime)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.getPurchaseSheet</td>
		<td>语法</td>
		<td>List<PurchaseSheetPO> getPurchaseSheet(Date beginTime, Date endTime)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.getSaleReturnsSheet</td>
		<td>语法</td>
		<td>List<SaleReturnsSheetPO> getSaleReturnsSheet(Date beginTime, Date endTime)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.getSalarySheet</td>
		<td>语法</td>
		<td>List<SalarySheetPO> getSalarySheet(Date beginTime, Date endTime)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.save</td>
		<td>语法</td>
		<td>void save(SaleStatusPO saleStatusPO)</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
    <tr>
		<td>SaleStatusDao.queryAll</td>
		<td>语法</td>
		<td>List<SaleStatusPO> queryAll()</td>
	</tr>
	<tr>
		<td></td>
		<td>前置条件</td>
		<td></td>
	</tr>
	<tr>
		<td></td>
		<td>后置条件</td>
		<td></td>
	</tr>
</table>



## 6 信息视角

### 6.1 数据持久化对象

新增的PO类：

- AccountP类包含账户名字、余额。
- SaleDetailSheetPO类包含商品名、商品类型、数量、单价、总价、时间。
- PaySheetPO类包含单据编号、银行账户、操作员、总额、单据状态、操作时间。
- PaySheetContentPO类包含单据编号、条目名、金额、注释。
- ReceiptSheetPO类包含单据编号、客户、操作员、总额单据状态、创建时间。
- ReceiptSheetContentPO类包含单据编号、银行账户、转账金额、备注。
- SalarySheetPO类包含员工编号、员工姓名、银行账户信息、应发工资、个人所得税、失业保险、住房公积金、总税款、实付工资、单据状态、创建时间。
- EmployeePO类包含姓名、性别、生日、电话号码、岗位、岗位等级、基础工资、岗位工资、工资制订方式、工资发放方式、银行账户。
- ClockInPO类包含姓名、电话、打卡时间、本月打卡次数。
- SaleStatusPO类包含总收入、总折扣、总支出、总利润。
- InitialAccountPO类包含商品信息、客户信息、账户信息。

持久化对象AccountPO的定义如下所示

````java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class AccountPO {
    /**
     * 账户名字
     */
    private String name;
    /**
     * 余额
     */
    private BigDecimal deposit;
}

````

持久化用户对象SaleDetailSheetPO的定义如下述所示

````java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class SaleDetailSheetPO {
    /**
     * 商品名
     */
    private String product;
    /**
     *商品类型
     */
    private String type;
    /**
     * 数量
     */
    private Integer quantity;
    /**
     *单价
     */
    private BigDecimal unitPrice;
    /**
     * 总价
     */
    private BigDecimal totalAmount;
    /**
     * 时间
     */
    private Date time;
}

````

持久化用户对象PaySheetPO的定义如下述所示

````java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class PaySheetPO {

    /**
     * 单据编号
     */
    private String id;
    /**
     * 银行账户
     */
    private String account;
    /**
     * 操作员
     */
    private String operator;
    /**
     * 总额
     */
    private BigDecimal totalAmount;
    /**
     * 单据状态
     */
    private PaySheetState state;
    /**
     * 创建时间
     */
    private Date createTime;


}
````

其余同理，见后端model详情。

### 6.2 数据库表

数据库中新增sale_returns_sheet_content表、sale_returns_sheet表、account_sheet表、receipt_sheet表、receipt_sheet_content表、pay_sheet表、pay_sheet_content表、sale_detail_sheet表、employee_sheet表、salary_sheet表、clock_in_sheet表、initial_sheet表、sale_status表。